CREATE DATABASE SIGHT;

<------TABLA ROLES------>
CREATE TABLE ROLES(
R_ID INT(20) NOT NULL,
R_NOMBRE CHAR(40) NOT NULL,
R_ESTADO CHAR(20) NOT NULL,
PRIMARY KEY(R_ID));

<------TABLA CLIENTES------>
CREATE TABLE CLIENTES(
CL_ID INT(20) NOT NULL,
CL_NOMBRE CHAR(40) NOT NULL,
CL_ESTADO CHAR(20) NOT NULL,
PRIMARY KEY(CL_ID));

<------TABLA PERSONAS------>
CREATE TABLE PERSONAS(
PER_ID INT(20) NOT NULL,
PER_NOMBRES CHAR(60) NOT NULL,
PER_APELLIDOS CHAR(60) NOT NULL,
PER_ESTADO CHAR(20) NOT NULL,
PER_ID_ROL INT(20) NOT NULL,
PRIMARY KEY(PER_ID),
FOREIGN KEY (PER_ID_ROL)
REFERENCES ROLES(R_ID));

<------TABLA PROYECTOS------>
CREATE TABLE PROYECTOS(
PRY_ID INT(20) NOT NULL,
PRY_NOMBRE CHAR(60) NOT NULL,
PRY_FECHA_INICIO DATE NOT NULL,
PRY_FECHA_FIN DATE NOT NULL,
PRY_ESTADO CHAR(20) NOT NULL,
PRY_ID_CLIENTE INT(20) NOT NULL,
PRY_ID_PERSONA INT(20) NOT NULL,
PRIMARY KEY(PRY_ID),
FOREIGN KEY (PRY_ID_CLIENTE)
REFERENCES CLIENTES(CL_ID),
FOREIGN KEY (PRY_ID_PERSONA)
REFERENCES PERSONAS(PER_ID));

ALTER TABLE PERSONAS ADD PER_CORREO CHAR(40) UNIQUE NOT NULL AFTER PER_APELLIDOS;

CREATE TABLE ASIGNACIONES(
ASG_ID INT(20) NOT NULL,
ASG_DEDICACION INT(20) NOT NULL,
ASG_FECHA_INICIO DATE NOT NULL,
ASG_FECHA_FIN DATE NOT NULL,
ASG_ID_PERSONA INT(20) NOT NULL,
ASG_ID_PROYECTO INT(20) NOT NULL,
PRIMARY KEY(ASG_ID),
FOREIGN KEY (ASG_ID_PROYECTO)
REFERENCES PROYECTOS(PRY_ID),
FOREIGN KEY (ASG_ID_PERSONA)
REFERENCES PERSONAS(PER_ID));


